<div class="d-flex flex-column min-vh-100" style="background: linear-gradient(to bottom, #1e1e1e 0%, #121212 100%);">

  <!-- Navbar -->
  <nav class="d-flex align-items-center justify-content-between px-4 py-3 sticky-top"
    style="background-color: rgba(0,0,0,0.7); backdrop-filter: blur(10px); z-index: 1000;">
    <div class="d-flex align-items-center gap-4">
      <button class="btn btn-link text-decoration-none text-white p-0" (click)="goBack()">
        <span class="fs-4">‚Üê</span>
      </button>
      <span class="fw-bold fs-5 text-white">Notifications</span>
    </div>

    <div class="d-flex align-items-center gap-3">
      <button *ngIf="unreadCount > 0" class="btn btn-sm text-decoration-none fw-bold" style="color: var(--brand-color);"
        (click)="markAllAsRead()">
        Mark all as read
      </button>
    </div>
  </nav>

  <div class="container px-4 py-4 flex-grow-1" style="max-width: 800px;">

    <!-- Loading -->
    <div *ngIf="loading" class="text-center py-5">
      <div class="spinner-border text-success" role="status"></div>
    </div>

    <!-- Error -->
    <div *ngIf="errorMessage" class="alert alert-danger mb-4"
      style="background: rgba(229, 9, 20, 0.1); border: 1px solid var(--text-negative); color: var(--text-negative);">
      {{ errorMessage }}
    </div>

    <!-- No notifications -->
    <div *ngIf="!loading && notifications.length === 0"
      class="d-flex flex-column align-items-center justify-content-center py-5 text-center h-100">
      <div class="mb-3 p-4 rounded-circle" style="background: rgba(255,255,255,0.05);">
        <span style="font-size: 2.5rem; opacity: 0.5;">üîî</span>
      </div>
      <h3 class="fw-bold mb-2 text-white">No notifications yet</h3>
      <p class="text-subdued">When you have updates, they'll show up here.</p>
    </div>

    <!-- Notifications list -->
    <div *ngIf="!loading && notifications.length > 0" class="d-flex flex-column gap-2">
      <div *ngFor="let notification of notifications"
        class="d-flex align-items-center p-3 rounded gap-3 position-relative overflow-hidden"
        [style.background-color]="notification.read ? 'transparent' : 'rgba(29, 185, 84, 0.1)'"
        style="border-bottom: 1px solid #282828; cursor: pointer; transition: background-color 0.2s;"
        onmouseover="this.style.backgroundColor = this.getAttribute('data-read') === 'true' ? '#282828' : 'rgba(29, 185, 84, 0.2)'"
        onmouseout="this.style.backgroundColor = this.getAttribute('data-read') === 'true' ? 'transparent' : 'rgba(29, 185, 84, 0.1)'"
        [attr.data-read]="notification.read" (click)="markAsRead(notification)">

        <!-- Dot for unread -->
        <div *ngIf="!notification.read"
          style="width: 8px; height: 8px; background: var(--brand-color); border-radius: 50%; box-shadow: 0 0 10px var(--brand-color);">
        </div>

        <!-- Icon based on type -->
        <div class="flex-shrink-0 d-flex align-items-center justify-content-center"
          style="width: 48px; height: 48px; background: #282828; border-radius: 8px; color: white; font-size: 1.5rem;">
          {{ getNotificationIcon(notification.type) }}
        </div>

        <!-- Content -->
        <div class="flex-grow-1">
          <div class="d-flex flex-column">
            <span class="text-white fw-bold mb-1" style="font-size: 1rem;">{{ notification.message }}</span>
            <span class="text-subdued" style="font-size: 0.85rem;">{{ formatDate(notification.created_at) }}</span>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>